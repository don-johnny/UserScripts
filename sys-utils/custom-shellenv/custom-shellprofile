#!/usr/bin/env bash

# shellcheck disable=SC1091
if [ -n "$TK_PROFILE_LOADED" ]; then
    true
else
    # nvm
    NVM_DIR="$([ -z "${XDG_CONFIG_HOME-}" ] && printf %s "${HOME}/.nvm" || printf %s "${XDG_CONFIG_HOME}/nvm")" && export NVM_DIR
    [ -d "$NVM_DIR/versions/node" ] && NVM_LATEST_V=$(find "$NVM_DIR/versions/node" -mindepth 1 -maxdepth 1 -type d | sed 's:.*/::g' | sort -rV | head -n 1)
    [ -n "$NVM_LATEST_V" ] && [ -d "$NVM_DIR/versions/node/$NVM_LATEST_V/bin" ] && case ":$PATH:" in *":$NVM_DIR/versions/node/$NVM_LATEST_V/bin:"*) ;; *) export PATH="$NVM_DIR/versions/node/$NVM_LATEST_V/bin:$PATH" ;; esac;
    [ -s "$NVM_DIR/nvm.sh" ] && source "$NVM_DIR/nvm.sh" --no-use

    # rbenv
    command -v rbenv >/dev/null && eval "$(rbenv init -)"

    # pyenv
    export PYENV_ROOT="$HOME/.pyenv"
    case ":$PATH:" in *":$PYENV_ROOT/bin:"*) ;; *) export PATH="$PYENV_ROOT/bin:$PATH" ;; esac;
    command -v pyenv >/dev/null && eval "$(pyenv init -)"

    export PIPENV_VENV_IN_PROJECT=1
    export POETRY_VIRTUALENVS_IN_PROJECT=1

    case ":$PATH:" in *":$HOME/.cargo/bin:"*) ;; *) export PATH="$HOME/.cargo/bin:$PATH" ;; esac;
    case ":$PATH:" in *":$HOME/.local/bin:"*) ;; *) export PATH="$HOME/.local/bin:$PATH" ;; esac;
    case ":$PATH:" in *":$HOME/go/bin:"*) ;; *) export PATH="$HOME/go/bin:$PATH" ;; esac;
    case ":$PATH:" in *":/usr/local/sbin:"*) ;; *) export PATH="/usr/local/sbin:$PATH" ;; esac;

    [ -r "$HOME/.custom-shellprofile" ]  && source "$HOME/.custom-shellprofile"

    # Flag shell profile is loaded.
    export TK_PROFILE_LOADED=1
fi
