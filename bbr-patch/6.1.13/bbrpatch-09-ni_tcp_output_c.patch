diff --git a/net/ipv4/tcp_output.c.orig b/net/ipv4/tcp_output.c
index 925594d..0d974e9 100644
--- a/net/ipv4/tcp_output.c.orig
+++ b/net/ipv4/tcp_output.c
@@ -2635,6 +2635,7 @@ static bool tcp_write_xmit(struct sock *sk, unsigned int mss_now, int nonagle,
 			skb_set_delivery_time(skb, tp->tcp_wstamp_ns, true);
 			list_move_tail(&skb->tcp_tsorted_anchor, &tp->tsorted_sent_queue);
 			tcp_init_tso_segs(skb, mss_now);
+			tcp_set_tx_in_flight(sk, skb);
 			goto repair; /* Skip network transmission */
 		}
 
